// Generated by CoffeeScript 1.10.0
var addJob, ajaxSetup, changeTeacher, deleteJob, editJobName, editJobShortName, toggleLogRecord, toggleStudentSubjectRecord, toggleTeacherSubjectRecord;

ajaxSetup = function() {
  var csrfSafeMethod, csrftoken;
  csrftoken = Cookies.get('csrftoken');
  csrfSafeMethod = function(method) {
    return /^(GET|HEAD|OPTIONS|TRACE)$/.test(method);
  };
  $.ajaxSetup({
    beforeSend: function(xhr, settings) {
      if (!csrfSafeMethod(settings.type) && !this.crossDomain) {
        xhr.setRequestHeader('X-CSRFToken', csrftoken);
      }
    }
  });
};

toggleStudentSubjectRecord = function(link, studentid, subjectid, teacherid, checked) {
  ajaxSetup();
  $.ajax({
    type: 'POST',
    url: link,
    data: {
      'studentid': studentid,
      'subjectid': subjectid,
      'teacherid': teacherid,
      'action': checked ? 'student_add_subject' : 'student_delete_subject'
    },
    dataType: 'json'
  });
};

toggleTeacherSubjectRecord = function(link, subjectid, checked) {
  ajaxSetup();
  $.ajax({
    type: 'POST',
    url: link,
    data: {
      'subjectid': subjectid,
      'action': checked ? 'teacher_add_subject' : 'teacher_delete_subject'
    },
    dataType: 'json'
  });
};

changeTeacher = function(link, studentid, subjectid, teacherid) {
  ajaxSetup();
  $.ajax({
    type: 'POST',
    url: link,
    data: {
      'studentid': studentid,
      'subjectid': subjectid,
      'teacherid': teacherid,
      'action': 'student_change_teacher'
    },
    dataType: 'json'
  });
};

addJob = function(link, subjectid, name, short_name) {
  ajaxSetup();
  $.ajax({
    type: 'POST',
    url: link,
    data: {
      'subjectid': subjectid,
      'name': name,
      'short_name': short_name,
      'action': 'add_job'
    },
    dataType: 'json',
    success: location.reload()
  });
};

deleteJob = function(link, jobid, confirmationMessage) {
  if (!confirm(confirmationMessage)) {
    return;
  }
  ajaxSetup();
  $.ajax({
    type: 'POST',
    url: link,
    data: {
      'jobid': jobid,
      'action': 'delete_job'
    },
    dataType: 'json',
    success: location.reload()
  });
};

editJobName = function(link, jobid, promptText, defaultText) {
  var newName;
  newName = prompt(promptText, defaultText);
  if (newName === null) {
    return;
  }
  ajaxSetup();
  $.ajax({
    type: 'POST',
    url: link,
    data: {
      'jobid': jobid,
      'new_name': newName,
      'action': 'edit_job_name'
    },
    dataType: 'json',
    success: location.reload()
  });
};

editJobShortName = function(link, jobid, promptText, defaultText) {
  var newShortName;
  newShortName = prompt(promptText, defaultText);
  if (newShortName === null) {
    return;
  }
  ajaxSetup();
  $.ajax({
    type: 'POST',
    url: link,
    data: {
      'jobid': jobid,
      'new_short_name': newShortName,
      'action': 'edit_job_short_name'
    },
    dataType: 'json',
    success: location.reload()
  });
};

toggleLogRecord = function(link, studentid, jobid, checked) {
  ajaxSetup();
  $.ajax({
    type: 'POST',
    url: link,
    data: {
      'studentid': studentid,
      'jobid': jobid,
      'action': checked ? 'add_log_entry' : 'delete_log_entry'
    }
  });
};
