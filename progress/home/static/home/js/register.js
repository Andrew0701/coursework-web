// Generated by CoffeeScript 1.10.0
var ajaxSetup, changeDate, changeMark;

ajaxSetup = function() {
  var csrfSafeMethod, csrftoken;
  csrftoken = Cookies.get('csrftoken');
  csrfSafeMethod = function(method) {
    return /^(GET|HEAD|OPTIONS|TRACE)$/.test(method);
  };
  $.ajaxSetup({
    beforeSend: function(xhr, settings) {
      if (!csrfSafeMethod(settings.type) && !this.crossDomain) {
        xhr.setRequestHeader('X-CSRFToken', csrftoken);
      }
    }
  });
};

changeMark = function(link, student_id, job_id, new_mark) {
  ajaxSetup();
  $.ajax({
    type: 'POST',
    url: link,
    data: {
      'student_id': student_id,
      'job_id': job_id,
      'new_mark': new_mark,
      'action': 'change_mark'
    },
    dataType: 'json'
  });
};

changeDate = function(link, student_id, job_id, new_date) {
  var day, month, year;
  new_date = new_date.split('-');
  year = new_date[0];
  month = new_date[1];
  day = new_date[2];
  ajaxSetup();
  $.ajax({
    type: 'POST',
    url: link,
    data: {
      'student_id': student_id,
      'job_id': job_id,
      'year': year,
      'month': month,
      'day': day,
      'action': 'change_date'
    },
    dataType: 'json'
  });
};
